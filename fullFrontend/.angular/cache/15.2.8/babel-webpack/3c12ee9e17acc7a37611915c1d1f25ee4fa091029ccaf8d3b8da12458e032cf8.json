{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../game/game.service\";\nimport * as i3 from \"../account/component/services/account.service\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = function (a1) {\n  return [\"/game\", a1];\n};\nfunction LibraryComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"a\", 8);\n    i0.ɵɵelement(3, \"img\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"h6\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const purchasedGame_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(7, _c0, purchasedGame_r1.game.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", purchasedGame_r1.game.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(purchasedGame_r1.game.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(purchasedGame_r1.game.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Publisher: \", purchasedGame_r1.game.publisherName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Genres: \", purchasedGame_r1.game.genreNames.join(\", \"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Purchase Date: \", purchasedGame_r1.purchaseDate, \"\");\n  }\n}\nexport class LibraryComponent {\n  constructor(router, gameService, accountService) {\n    this.router = router;\n    this.gameService = gameService;\n    this.accountService = accountService;\n    this.games = [];\n    this.TOKEN = 'token';\n    this.purchasedGames = [];\n  }\n  ngOnInit() {\n    const token = localStorage.getItem(this.TOKEN);\n    console.log('Token:', token);\n    const userId = this.accountService.getUserId();\n    if (userId) {\n      console.log('Fetching games for user:', userId);\n      this.getGamesForUser(userId);\n    }\n  }\n  getGamesForUser(userId) {\n    console.log('User ID in getGamesForUser:', userId);\n    this.gameService.getGamesForUser(userId).subscribe(purchasedGames => {\n      this.purchasedGames = purchasedGames;\n      this.games = purchasedGames.map(purchasedGame => purchasedGame.game);\n      console.log('Received purchased games:', this.purchasedGames);\n    }, error => {\n      console.error(error);\n    });\n  }\n  goToHome() {\n    this.router.navigate(['/home']);\n  }\n  goToStore() {\n    this.router.navigate(['/store']);\n  }\n}\nLibraryComponent.ɵfac = function LibraryComponent_Factory(t) {\n  return new (t || LibraryComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.GameService), i0.ɵɵdirectiveInject(i3.AccountService));\n};\nLibraryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LibraryComponent,\n  selectors: [[\"app-library\"]],\n  decls: 18,\n  vars: 1,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"game-grid\"], [\"class\", \"game-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"game-item\"], [1, \"image-container\"], [3, \"routerLink\"], [\"alt\", \"Game Image\", 1, \"game-image\", 3, \"src\"]],\n  template: function LibraryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\", 1);\n      i0.ɵɵtext(2, \"Library\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"p\");\n      i0.ɵɵtext(5, \"Welcome to the Library page!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"p\");\n      i0.ɵɵtext(7, \"Please select an option:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\")(9, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function LibraryComponent_Template_button_click_9_listener() {\n        return ctx.goToHome();\n      });\n      i0.ɵɵtext(10, \"Go to Home\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function LibraryComponent_Template_button_click_11_listener() {\n        return ctx.goToStore();\n      });\n      i0.ɵɵtext(12, \"Go to Store\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(13, \"hr\");\n      i0.ɵɵelementStart(14, \"h5\");\n      i0.ɵɵtext(15, \"Your Games:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 4);\n      i0.ɵɵtemplate(17, LibraryComponent_div_17_Template, 14, 9, \"div\", 5);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", ctx.purchasedGames);\n    }\n  },\n  dependencies: [i4.NgForOf, i1.RouterLink],\n  styles: [\".game-grid[_ngcontent-%COMP%] {\\r\\n  display: grid;\\r\\n  gap: 20px;\\r\\n}\\r\\n\\r\\n@media (min-width: 768px) {\\r\\n  .game-grid[_ngcontent-%COMP%] {\\r\\n    grid-template-columns: repeat(4, 1fr);\\r\\n  }\\r\\n}\\r\\n\\r\\n@media (max-width: 767px) {\\r\\n  .game-grid[_ngcontent-%COMP%] {\\r\\n    grid-template-columns: repeat(2, 1fr); \\r\\n  }\\r\\n}\\r\\n\\r\\n\\r\\n.game-item[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.image-container[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding-bottom: 100%;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.game-image[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  object-fit: cover;\\r\\n  cursor: pointer;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGlicmFyeS9saWJyYXJ5LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0VBQ2IsU0FBUztBQUNYOztBQUVBO0VBQ0U7SUFDRSxxQ0FBcUM7RUFDdkM7QUFDRjs7QUFFQTtFQUNFO0lBQ0UscUNBQXFDO0VBQ3ZDO0FBQ0Y7OztBQUdBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsV0FBVztFQUNYLG9CQUFvQjtFQUNwQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxXQUFXO0VBQ1gsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixlQUFlO0FBQ2pCIiwic291cmNlc0NvbnRlbnQiOlsiLmdhbWUtZ3JpZCB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBnYXA6IDIwcHg7XHJcbn1cclxuXHJcbkBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkge1xyXG4gIC5nYW1lLWdyaWQge1xyXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNCwgMWZyKTtcclxuICB9XHJcbn1cclxuXHJcbkBtZWRpYSAobWF4LXdpZHRoOiA3NjdweCkge1xyXG4gIC5nYW1lLWdyaWQge1xyXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgXHJcbiAgfVxyXG59XHJcblxyXG5cclxuLmdhbWUtaXRlbSB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4uaW1hZ2UtY29udGFpbmVyIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nLWJvdHRvbTogMTAwJTtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbn1cclxuXHJcbi5nYW1lLWltYWdlIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IAYMA,8BAAoE;IAG9DA,yBAA6E;IAC/EA,iBAAI;IAENA,0BAAI;IAAAA,YAA6B;IAAAA,iBAAK;IACtCA,yBAAG;IAAAA,YAAoC;IAAAA,iBAAI;IAC3CA,yBAAG;IAAAA,YAAiD;IAAAA,iBAAI;IACxDA,0BAAG;IAAAA,aAAsD;IAAAA,iBAAI;IAC7DA,0BAAG;IAAAA,aAA+C;IAAAA,iBAAI;;;;IARjDA,eAA+C;IAA/CA,iFAA+C;IACxBA,eAAmC;IAAnCA,sEAAmC;IAG3DA,eAA6B;IAA7BA,gDAA6B;IAC9BA,eAAoC;IAApCA,uDAAoC;IACpCA,eAAiD;IAAjDA,6EAAiD;IACjDA,eAAsD;IAAtDA,kFAAsD;IACtDA,eAA+C;IAA/CA,2EAA+C;;;ACV1D,OAAM,MAAOC,gBAAgB;EAK3BC,YACUC,MAAc,EACdC,WAAwB,EACxBC,cAA8B;IAF9B,WAAM,GAANF,MAAM;IACN,gBAAW,GAAXC,WAAW;IACX,mBAAc,GAAdC,cAAc;IAPxB,UAAK,GAAW,EAAE;IACD,UAAK,GAAG,OAAO;IAChC,mBAAc,GAAoB,EAAE;EAMjC;EAEHC,QAAQ;IACN,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACC,KAAK,CAAC;IAC9CC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEL,KAAK,CAAC;IAC5B,MAAMM,MAAM,GAAG,IAAI,CAACR,cAAc,CAACS,SAAS,EAAE;IAC9C,IAAID,MAAM,EAAE;MACVF,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEC,MAAM,CAAC;MAC/C,IAAI,CAACE,eAAe,CAACF,MAAM,CAAC;;EAEhC;EAEAE,eAAe,CAACF,MAAc;IAC5BF,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEC,MAAM,CAAC;IAClD,IAAI,CAACT,WAAW,CAACW,eAAe,CAACF,MAAM,CAAC,CAACG,SAAS,CAC/CC,cAA+B,IAAI;MAClC,IAAI,CAACA,cAAc,GAAGA,cAAc;MACpC,IAAI,CAACC,KAAK,GAAGD,cAAc,CAACE,GAAG,CAAEC,aAA4B,IAAKA,aAAa,CAACC,IAAI,CAAC;MACrFV,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE,IAAI,CAACK,cAAc,CAAC;IAC/D,CAAC,EACAK,KAAK,IAAI;MACRX,OAAO,CAACW,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CACF;EACH;EAGAC,QAAQ;IACN,IAAI,CAACpB,MAAM,CAACqB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;EACjC;EAEAC,SAAS;IACP,IAAI,CAACtB,MAAM,CAACqB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;;AA1CWvB,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAAyB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDZ7B9B,8BAAkB;MACQA,uBAAO;MAAAA,iBAAK;MACpCA,8BAAuB;MAClBA,4CAA4B;MAAAA,iBAAI;MACnCA,yBAAG;MAAAA,wCAAwB;MAAAA,iBAAI;MAC/BA,2BAAK;MAC6BA;QAAA,OAAS+B,cAAU;MAAA,EAAC;MAAC/B,2BAAU;MAAAA,iBAAS;MACxEA,kCAAsD;MAAtBA;QAAA,OAAS+B,eAAW;MAAA,EAAC;MAAC/B,4BAAW;MAAAA,iBAAS;MAE5EA,sBAAI;MACJA,2BAAI;MAAAA,4BAAW;MAAAA,iBAAK;MACpBA,+BAAuB;MACrBA,oEAWM;MACRA,iBAAM;;;MAZ2BA,gBAAiB;MAAjBA,4CAAiB","names":["i0","LibraryComponent","constructor","router","gameService","accountService","ngOnInit","token","localStorage","getItem","TOKEN","console","log","userId","getUserId","getGamesForUser","subscribe","purchasedGames","games","map","purchasedGame","game","error","goToHome","navigate","goToStore","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\novak\\Documents\\msgSystems\\alphaAppFront\\MSG\\fullFrontend\\src\\app\\library\\library.component.html","C:\\Users\\novak\\Documents\\msgSystems\\alphaAppFront\\MSG\\fullFrontend\\src\\app\\library\\library.component.ts"],"sourcesContent":["<div class=\"card\">\r\n  <h4 class=\"card-header\">Library</h4>\r\n  <div class=\"card-body\">\r\n    <p>Welcome to the Library page!</p>\r\n    <p>Please select an option:</p>\r\n    <div>\r\n      <button class=\"btn btn-primary\" (click)=\"goToHome()\">Go to Home</button>\r\n      <button class=\"btn btn-primary\" (click)=\"goToStore()\">Go to Store</button>\r\n    </div>\r\n    <hr>\r\n    <h5>Your Games:</h5>\r\n    <div class=\"game-grid\">\r\n      <div *ngFor=\"let purchasedGame of purchasedGames\" class=\"game-item\">\r\n        <div class=\"image-container\">\r\n          <a [routerLink]=\"['/game', purchasedGame.game.id]\">\r\n            <img class=\"game-image\" [src]=\"purchasedGame.game.imageUrl\" alt=\"Game Image\">\r\n          </a>\r\n        </div>\r\n        <h6>{{ purchasedGame.game.name }}</h6>\r\n        <p>{{ purchasedGame.game.description }}</p>\r\n        <p>Publisher: {{ purchasedGame.game.publisherName }}</p>\r\n        <p>Genres: {{ purchasedGame.game.genreNames.join(', ') }}</p>\r\n        <p>Purchase Date: {{ purchasedGame.purchaseDate }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Game } from '../models/game.model';\r\nimport { PurchasedGame } from '../models/purchased-game.model';\r\nimport { GameService } from '../game/game.service';\r\nimport { AccountService } from '../account/component/services/account.service';\r\n\r\n@Component({\r\n  selector: 'app-library',\r\n  templateUrl: './library.component.html',\r\n  styleUrls: ['./library.component.css']\r\n})\r\nexport class LibraryComponent implements OnInit {\r\n  games: Game[] = [];\r\n  private readonly TOKEN = 'token';\r\n  purchasedGames: PurchasedGame[] = [];\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private gameService: GameService,\r\n    private accountService: AccountService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    const token = localStorage.getItem(this.TOKEN);\r\n    console.log('Token:', token);\r\n    const userId = this.accountService.getUserId();\r\n    if (userId) {\r\n      console.log('Fetching games for user:', userId);\r\n      this.getGamesForUser(userId);\r\n    }\r\n  }\r\n\r\n  getGamesForUser(userId: string) {\r\n    console.log('User ID in getGamesForUser:', userId);\r\n    this.gameService.getGamesForUser(userId).subscribe(\r\n      (purchasedGames: PurchasedGame[]) => {\r\n        this.purchasedGames = purchasedGames;\r\n        this.games = purchasedGames.map((purchasedGame: PurchasedGame) => purchasedGame.game);\r\n        console.log('Received purchased games:', this.purchasedGames);\r\n      },\r\n      (error) => {\r\n        console.error(error);\r\n      }\r\n    );\r\n  }\r\n  \r\n\r\n  goToHome() {\r\n    this.router.navigate(['/home']);\r\n  }\r\n\r\n  goToStore() {\r\n    this.router.navigate(['/store']);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}